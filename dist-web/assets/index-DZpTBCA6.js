import{r as f,a as _}from"./react-uYDHyRUA.js";import{D as S,U as D,a as E,L as $,B as M,X as k,b as U,S as z,C as B}from"./lucide-Dp83v6hX.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const g of i.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&n(g)}).observe(document,{childList:!0,subtree:!0});function u(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=u(a);fetch(a.href,i)}})();var O={exports:{}},C={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F=f,H=Symbol.for("react.element"),W=Symbol.for("react.fragment"),q=Object.prototype.hasOwnProperty,J=F.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,G={key:!0,ref:!0,__self:!0,__source:!0};function I(r,s,u){var n,a={},i=null,g=null;u!==void 0&&(i=""+u),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(g=s.ref);for(n in s)q.call(s,n)&&!G.hasOwnProperty(n)&&(a[n]=s[n]);if(r&&r.defaultProps)for(n in s=r.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:H,type:r,key:i,ref:g,props:a,_owner:J.current}}C.Fragment=W;C.jsx=I;C.jsxs=I;O.exports=C;var e=O.exports,A,L=_;A=L.createRoot,L.hydrateRoot;const K=[{id:"photography-style",type:"variable",name:"Photography Style",value:"",tags:["Candid photography","Documentary photography","Lifestyle photography","Surrealist photography"]},{id:"subject",type:"variable",name:"Subject",value:"",tags:["Young woman","Elderly person","Fashion model","Modern skyscraper"]},{id:"important-details",type:"variable",name:"Important Details",value:"",tags:["Long blonde hair","Reflecting on water","Wearing casual clothes","Dramatic shadows"]},{id:"background",type:"variable",name:"Background",value:"",tags:["Blurred city skyline","Misty forest","Ocean waves","Mountain vista"]},{id:"pose-action",type:"variable",name:"Pose or Action",value:"",tags:["Sitting with legs crossed","Standing with hands on hips","Walking through a busy market","Laughing with eyes closed"]},{id:"framing",type:"variable",name:"Framing",value:"",tags:["Close-up on face","Medium shot from the waist up","Full-body shot","Over-the-shoulder framing","Symmetrical composition"]},{id:"lighting",type:"variable",name:"Lighting",value:"",tags:["Natural sunlight","Studio lighting","Dramatic shadows","Soft diffused light","Golden hour lighting"]},{id:"camera-angle",type:"variable",name:"Camera Angle",value:"",tags:["Eye level","Low angle","High angle","Dutch angle","Birds eye view"]},{id:"camera-properties",type:"variable",name:"Camera Properties",value:"",tags:["Shallow depth of field","Wide aperture","Long exposure","High ISO","Fast shutter speed"]},{id:"photographer-style",type:"variable",name:"Photographer Style",value:"",tags:["Annie Leibovitz","Steve McCurry","Henri Cartier-Bresson","Ansel Adams","Richard Avedon"]},{id:"special-effects",type:"variable",name:"Special Effects",value:"",tags:["Motion blur","Double exposure","Light trails","Lens flare","Color filters"]}],R=r=>{const s=[];let u="",n=!1;for(let a=0;a<r.length;a++){const i=r[a];i==='"'?n&&r[a+1]==='"'?(u+='"',a++):n=!n:i===","&&!n?(s.push(u.trim()),u=""):u+=i}return s.push(u.trim()),s},Y=r=>{const s=r.split(/\r?\n/).filter(a=>a.trim());if(s.length===0)return[];const n=R(s[0]).map(a=>({name:a,tags:[],type:"variable",value:""}));for(let a=1;a<s.length;a++)R(s[a]).forEach((g,m)=>{g&&m<n.length&&n[m].tags.push(g)});return n},Q=async r=>new Promise((s,u)=>{const n=new FileReader;n.onload=a=>{try{const i=a.target?.result,g=Y(i);s(g)}catch(i){u(i)}},n.onerror=()=>u(new Error("Failed to read file")),n.readAsText(r)});function X({variables:r,onVariableCreate:s,onVariableDelete:u,onImportVariables:n}){const a=o=>o.includes(",")||o.includes('"')||o.includes(`
`)?`"${o.replace(/"/g,'""')}"`:o,i=()=>{if(r.length===0)return;const o=[r.map(t=>a(t.name)).join(",")],x=Math.max(...r.map(t=>t.tags.length));for(let t=0;t<x;t++){const l=r.map(c=>{const p=c.tags[t]||"";return a(p)});o.push(l.join(","))}const j=new Blob([o.join(`
`)],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a");y.href=URL.createObjectURL(j),y.download="variables.csv",y.click(),URL.revokeObjectURL(y.href)},g=o=>{const x=o.target.files?.[0];if(!x||!n)return;const j=new FileReader;j.onload=async y=>{try{const t=await Q(x);n(t)}catch(t){console.error("Import error:",t),alert("Failed to import variables")}},j.readAsText(x)},m=o=>{o.preventDefault(),o.currentTarget.style.backgroundColor="#f3f4f6"},b=o=>{o.currentTarget.style.backgroundColor=""},h=o=>{o.preventDefault(),o.currentTarget.style.backgroundColor="";const x=o.dataTransfer.getData("text/plain");x&&u(x)};return e.jsxs("div",{className:"h-full p-4 overflow-y-auto",onDragOver:m,onDragLeave:b,onDrop:h,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Variables"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>document.getElementById("import-csv")?.click(),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Import Variables (CSV)",children:e.jsx(S,{size:20})}),e.jsx("button",{onClick:i,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:"Export Variables (CSV)",children:e.jsx(D,{size:20})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"file",id:"import-csv",accept:".csv",onChange:g,className:"hidden"}),r.map(o=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 px-4 py-2 text-left text-sm bg-white hover:bg-gray-50 rounded-lg border",children:o.name}),e.jsx("button",{onClick:()=>{const x={...o,id:`${o.id}-${Date.now()}`};s(x)},className:"p-1.5 text-gray-500 hover:text-blue-500 hover:bg-gray-100 rounded-lg",title:"Add to canvas",children:"+"}),e.jsx("button",{onClick:()=>u(o.id),className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-gray-100 rounded-lg",title:"Delete variable",children:"×"})]},o.id))]})]})}function Z({variable:r,index:s,onUpdate:u,onRemove:n,onDragStart:a,onAddToSidebar:i}){const[g,m]=f.useState(r.selectedTag||""),[b,h]=f.useState(r.separator||","),[o,x]=f.useState(r.isLocked||!1),[j,y]=f.useState(!1),t=f.useRef(null);f.useEffect(()=>{m(r.selectedTag||"")},[r.selectedTag]),f.useEffect(()=>{u({...r,selectedTag:g,separator:b,isLocked:o,value:g||r.tags[0]||""})},[g,b,o]),f.useEffect(()=>{const d=v=>{t.current&&!t.current.contains(v.target)&&y(!1)};return document.addEventListener("mousedown",d),()=>document.removeEventListener("mousedown",d)},[]);const l=()=>{if(o)return;const d=r.tags;if(d.length>0){const v=Math.floor(Math.random()*d.length),w=d[v];m(w)}},c=d=>{o||(m(d),r.tags.includes(d)||(r.tags=[...r.tags,d]))},p=d=>{const v=d.target.files?.[0];if(v){const w=new FileReader;w.onload=N=>{const P=(N.target?.result).split(`
`).map(V=>V.trim()).filter(Boolean);r.tags=[...new Set([...r.tags,...P])]},w.readAsText(v)}};return e.jsxs("div",{draggable:!0,onDragStart:d=>a?.(d,s),className:"group relative flex flex-col gap-2 p-4 bg-white border rounded-lg shadow-sm","data-variable-card":!0,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"flex-1 text-sm font-medium text-gray-900",children:r.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:l,className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Random Tag",children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:()=>x(!o),className:`p-1.5 ${o?"text-blue-500":"text-gray-500"} hover:text-gray-700 hover:bg-gray-100 rounded-lg`,title:o?"Unlock":"Lock",children:e.jsx($,{size:16})}),e.jsx("button",{onClick:i,className:"p-1.5 text-gray-500 hover:text-blue-500 hover:bg-gray-100 rounded-lg",title:"Add to Sidebar",children:e.jsx(M,{size:16})}),e.jsx("button",{onClick:n,className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-gray-100 rounded-lg",title:"Remove",children:e.jsx(k,{size:16})})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",ref:t,children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:g,onChange:d=>c(d.target.value),disabled:o,className:"flex-grow px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"Enter or select a tag"}),e.jsx("button",{onClick:()=>y(!j),className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Show tag list",children:e.jsx(U,{size:16})})]}),j&&e.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-md shadow-lg",children:[e.jsxs("div",{className:"p-2 border-b",children:[e.jsx("input",{type:"file",accept:".txt",onChange:p,className:"hidden",id:`file-input-${r.id}`}),e.jsx("button",{onClick:()=>document.getElementById(`file-input-${r.id}`)?.click(),className:"w-full px-2 py-1 text-sm text-left text-gray-700 hover:bg-gray-100 rounded",children:"Import tags from file..."})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:r.tags.map(d=>e.jsx("button",{onClick:()=>{m(d),y(!1)},className:"w-full px-2 py-1 text-sm text-left text-gray-700 hover:bg-gray-100",children:d},d))})]})]}),e.jsx("input",{type:"text",value:b,onChange:d=>h(d.target.value),disabled:o,placeholder:"Separator",className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})}function ee({connector:r,onChange:s,onRemove:u}){return e.jsx("div",{className:"p-4 bg-white rounded-lg shadow",children:e.jsxs("div",{className:"relative flex items-center",children:[e.jsx("input",{type:"text",value:r.value,onChange:n=>s(n.target.value),className:"flex-grow px-2 py-1 border rounded mr-8"}),e.jsx("button",{onClick:u,className:"absolute right-2 p-1 text-gray-500 hover:text-red-600 hover:bg-gray-100 rounded",title:"Remove",children:e.jsx(k,{size:12})})]})})}function te({items:r,onItemsChange:s,onItemRemove:u,onConnectorChange:n,onAddToSidebar:a}){const[i,g]=f.useState(!1),[m,b]=f.useState(""),h=()=>{if(!m)return;const t=`variable-${Date.now()}`;s([...r,{id:t,name:m,tags:[],type:"variable",value:""}]),b(""),g(!1)},o=()=>{const t=`connector-${Date.now()}`;s([...r,{id:t,type:"connector",value:""}])},x=()=>{const t={version:"1.0",timestamp:new Date().toISOString(),items:r.map(({id:d,...v})=>v)},l=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),c=URL.createObjectURL(l),p=document.createElement("a");p.href=c,p.download=`template-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(c)},j=t=>{const l=t.target.files?.[0];if(!l)return;const c=new FileReader;c.onload=p=>{try{const d=p.target?.result,v=JSON.parse(d);if(v.items&&Array.isArray(v.items)){const w=v.items.map(N=>({...N,id:`${N.type==="variable"?"var":"conn"}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}));s(w)}else alert("Invalid template format")}catch(d){console.error("Import error:",d),alert("Failed to import template")}},c.readAsText(l)},y=(t,l)=>{const c=[...r],p=c[t];c.splice(t,1),c.splice(l,0,p),s(c)};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-end gap-2 p-4 border-b",children:[e.jsx("button",{onClick:()=>{const t=[...r];document.querySelectorAll("[data-variable-card]").forEach((c,p)=>{const d=t[p];if(d?.type==="variable"&&!d.isLocked&&d.tags?.length>0){const v=Math.floor(Math.random()*d.tags.length),w=d.tags[v];t[p]={...d,selectedTag:w,value:w}}}),s(t)},className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",title:"Random Tags for All",children:e.jsx(E,{size:16})}),e.jsx("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-white border rounded hover:bg-gray-50",title:"Add Connector",children:"Add Connector"}),e.jsxs("button",{onClick:()=>document.getElementById("import-template")?.click(),className:"flex items-center gap-2 px-4 py-2 bg-white border rounded hover:bg-gray-50",title:"Import Template",children:[e.jsx(S,{size:16}),"Import Template"]}),e.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 bg-white border rounded hover:bg-gray-50",title:"Export Template",children:[e.jsx(D,{size:16}),"Export Template"]}),e.jsx("input",{type:"file",id:"import-template",accept:".json",onChange:j,className:"hidden"})]}),e.jsx("div",{className:"flex-1 p-4 space-y-4 overflow-y-auto bg-gray-50",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.map((t,l)=>e.jsxs("div",{className:"relative transition-opacity duration-200",children:[t.type==="variable"?e.jsx(Z,{variable:t,index:l,onUpdate:c=>{const p=[...r];p[l]={...c,id:t.id,type:"variable"},s(p)},onRemove:()=>u(t.id),onAddToSidebar:()=>a(t)}):e.jsx(ee,{connector:t,onChange:c=>n(t.id,c),onRemove:()=>u(t.id)}),e.jsxs("div",{className:"absolute top-0 right-0 flex flex-col",children:[e.jsx("button",{onClick:()=>y(l,l-1),disabled:l===0,className:"p-1 text-gray-600 hover:bg-gray-100 rounded-full disabled:opacity-50",title:"Move Up",children:"↑"}),e.jsx("button",{onClick:()=>y(l,l+1),disabled:l===r.length-1,className:"p-1 text-gray-600 hover:bg-gray-100 rounded-full disabled:opacity-50",title:"Move Down",children:"↓"})]})]},t.id)),e.jsx("button",{onClick:()=>g(!0),className:"flex items-center justify-center w-full h-32 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 hover:bg-gray-50",children:e.jsx("span",{className:"text-4xl text-gray-400",children:"+"})})]})}),i&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white p-4 rounded",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Enter Variable Name"}),e.jsx("input",{type:"text",value:m,onChange:t=>b(t.target.value),className:"border p-2 mt-2 mb-4 w-full"}),e.jsx("button",{onClick:h,className:"bg-blue-500 text-white p-2 rounded mr-2",children:"Add"}),e.jsx("button",{onClick:()=>g(!1),className:"bg-gray-300 p-2 rounded",children:"Cancel"})]})})]})}function T({items:r,onSavePrompt:s,promptHistory:u=[],onExportHistory:n,onDeletePrompt:a,showHistory:i=!1}){const g=()=>r.map(h=>"value"in h?h.value?h.value+(h.separator||""):"":"selectedTag"in h&&h.selectedTag?h.selectedTag+(h.separator||""):"").filter(Boolean).join(" "),m=()=>{navigator.clipboard.writeText(g())},b=g();return i?e.jsxs("div",{className:"bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Prompt History"}),e.jsxs("button",{onClick:n,className:"p-2 text-gray-600 hover:bg-gray-100 rounded flex items-center gap-1",title:"Export history",children:[e.jsx(S,{size:20}),"Export"]})]}),e.jsx("div",{className:"space-y-2",children:u.map((h,o)=>e.jsxs("div",{className:"p-2 bg-white rounded border group relative",children:[h,e.jsx("button",{onClick:()=>a?.(o),className:"absolute top-2 right-2 p-1 text-gray-400 hover:text-red-500 rounded opacity-0 group-hover:opacity-100 transition-opacity",title:"Delete prompt",children:e.jsx(k,{size:16})})]},o))})]}):e.jsxs("div",{className:"bg-yellow-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Generated Prompt"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[b.length," characters"]}),e.jsx("button",{onClick:()=>s(b),className:"p-2 text-gray-600 hover:bg-yellow-200 rounded",title:"Save to history",children:e.jsx(z,{size:20})}),e.jsx("button",{onClick:m,className:"p-2 text-gray-600 hover:bg-yellow-200 rounded",title:"Copy to clipboard",children:e.jsx(B,{size:20})})]})]}),e.jsx("div",{className:"p-3 bg-white rounded min-h-[60px] whitespace-pre-wrap",children:b||"Add variables and connectors to generate your prompt"})]})}function re(){const[r,s]=f.useState(()=>K),[u,n]=f.useState([]),[a,i]=f.useState([]),g=t=>{const l={...t,id:`var-${Date.now()}`};n(c=>[...c,l])},m=t=>{s(r.filter(l=>l.id!==t))},b=t=>{n(l=>l.filter(c=>c.id!==t))},h=t=>{const l=t.map(c=>({...c,id:`var-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}));s(c=>[...c,...l])},o=t=>{i(l=>[...l,t])},x=t=>{i(l=>l.filter((c,p)=>p!==t))},j=()=>{const t=a.join(`
`),l=new Blob([t],{type:"text/plain"}),c=URL.createObjectURL(l),p=document.createElement("a");p.href=c,p.download="prompt-history.txt",document.body.appendChild(p),p.click(),document.body.removeChild(p),URL.revokeObjectURL(c)},y=t=>{const l={...t,id:`var-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};s(c=>[...c,l])};return e.jsx("div",{className:"flex flex-col h-screen overflow-hidden",children:e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx(X,{variables:r,onVariableCreate:g,onVariableDelete:m,onImportVariables:h}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto",children:[e.jsx("div",{className:"p-4 border-b bg-white",children:e.jsx(T,{items:u,onSavePrompt:o,showHistory:!1})}),e.jsx("div",{className:"flex-1 min-h-0",children:e.jsx(te,{items:u,onItemsChange:n,onItemRemove:b,onConnectorChange:(t,l)=>{n(c=>c.map(p=>p.id===t&&!("tags"in p)?{...p,value:l}:p))},onAddToSidebar:y})}),a.length>0&&e.jsx("div",{className:"p-4 border-t bg-white max-h-48 overflow-y-auto",children:e.jsx(T,{items:[],onSavePrompt:o,promptHistory:a,onExportHistory:j,onDeletePrompt:x,showHistory:!0})})]})]})})}A(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(re,{})}));
